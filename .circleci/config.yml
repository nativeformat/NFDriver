version: 2
jobs:
  buildlinux:
    docker:
      - image: ubuntu:trusty
    steps:
      - checkout
      - run:
          name: Build
          command: sh ci/linux.sh build
      - run:
          name: Build Android
          command: BUILD_ANDROID=1 sh ci/linux.sh build
  buildmac:
    macos:
      xcode: "9.0"
    steps:
      - checkout
      - run:
          name: Build OSX
          command: sh ci/osx.sh build
      - run:
          name: Build IOS 
          command: BUILD_IOS=1 sh ci/osx.sh build
      - run:
          name: Build Android
          command: BUILD_ANDROID=1 sh ci/osx.sh build

workflows:
  version: 2
  build:
    jobs:
      - buildlinux
      - buildmac
